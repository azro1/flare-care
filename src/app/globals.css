@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme colors */
    --bg-main: #f8fafc; /* Light main page background */
    --bg-main-gradient: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f8fafc 100%); /* Light gradient background */
    --bg-quick-actions-gradient: linear-gradient(135deg, rgba(95, 158, 160, 0.1) 0%, rgba(95, 158, 160, 0.05) 50%, rgba(95, 158, 160, 0.1) 100%);
    --bg-primary: #f8fafc; /* Light primary background */
    --bg-secondary: #e2e8f0; /* Light secondary background */
    --bg-tertiary: #f8fafc; /* Light tertiary background */
    --bg-section: #f1f5f9; /* Light section background */
    --bg-nav-footer: #1e293b; /* Dark nav/footer for light mode */
    --text-footer: #d1d5db; /* Footer text - warm gray, no blue (dark bg) */
    --text-footer-muted: #9ca3af; /* Footer muted text - warm gray, no blue */
    --border-footer: rgba(209, 213, 219, 0.08); /* Footer separator - lighter */
    --bg-dropdown: #ffffff; /* Dropdown background */
    --bg-dropdown-hover: #f1f5f9; /* Dropdown item hover */
    --border-dropdown: #cbd5e1; /* Dropdown border */
    --text-dropdown: #1e293b; /* Dropdown text */
    --bg-card: #ffffff;
    --bg-card-hover: #f1f5f9;
    --bg-card-inner: #f8fafc; /* Light gray inner card background - different from white */
    --text-card-inner: #1f2937; /* Darker text for inner cards in light mode */
    --bg-icon: #e2e8f0; /* Light icon background */
    --bg-icon-charcoal: #2f333a; /* Darker charcoal option for icon backgrounds */
    --bg-avatar-fallback-dark: #3a3e46; /* Charcoal avatar fallback background */
    --bg-avatar: #ffffff; /* White avatar background for contrast in light mode */
    --text-icon: #475569; /* Light icon text */
    --bg-input: #ffffff;
    --bg-input-dark: #f1f5f9; /* Light input background */
    --border-input: #cbd5e1; /* Light input border */
    --border-input-dark: #cbd5e1; /* Light input border */
    --bg-button-primary: #3b82f6;
    --bg-button-primary-hover: #2563eb; /* Primary button hover */
    --bg-button-cadet: #5F9EA0; /* Cadet blue button */
    --bg-button-cadet-hover: #4a8a8a; /* Cadet blue button hover - subtle darker for light mode */
    --bg-button-delete: #ef4444; /* Light delete button background - solid red */
    --bg-button-delete-hover: #dc2626; /* Light delete button hover - darker red */
    --bg-button-secondary: #ffffff;
    --bg-button-secondary-hover: #f1f5f9;
    --bg-button-hover: #e2e8f0; /* Light button hover */
    --bg-button-disabled: #cbd5e1; /* Light disabled button background */
    --text-button-disabled: #475569; /* Light disabled button text */
    --bg-button-cancel: #e2e8f0; /* Light cancel button background */
    --bg-button-cancel-hover: #cbd5e1; /* Light cancel button hover */
    --bg-error: #E0F2F3; /* Light cadet blue error background */
    --border-error: #5F9EA0; /* Cadet blue error border */
    --text-error: #5F9EA0; /* Cadet blue error text */
    
    /* Cadet blue for UI elements (stronger for light mode visibility) */
    --text-cadet-blue: #2d7d87; /* Stronger cadet blue for light mode */
    
    /* Radio button styling */
    --radio-bg: #ffffff; /* Light radio button background */
    --radio-border: #cbd5e1; /* Light radio button border - matches input border */
    --radio-checked-border: #cbd5e1; /* Light checked radio border - same as input */
    
    /* Goal colors */
    --bg-goal-success: #dcfce7; /* Light green background for completed goals */
    --text-goal-success: #059669; /* Medium green text for completed goals */
    --bg-goal-icon-success: #dcfce7; /* Light green background for success icons */
    --text-goal-icon-success: #16a34a; /* Dark green for success icons */
    --bg-goal-icon-medication: #f3e8ff; /* Light purple background for medication icons */
    --text-goal-icon-medication: #9333ea; /* Dark purple for medication icons */
    --bg-goal-icon-hydration: #dbeafe; /* Light blue background for hydration icons */
    --text-goal-icon-hydration: #2563eb; /* Dark blue for hydration icons */
    
    --text-primary: #1e293b; /* Dark text for light background */
    --text-secondary: #475569; /* Medium dark text */
    --text-tertiary: #64748b; /* Lighter dark text */
    --text-muted: #475569; /* Muted gray text - darker for light mode readability */
    --text-white: #ffffff;
    
    --border-primary: #cbd5e1; /* Light primary border */
    --border-secondary: #94a3b8; /* Light secondary border */
    --border-card: #cbd5e1; /* Light card border */
    --border-card-inner: rgba(148, 163, 184, 0.25); /* Light inner card border */
    
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  }

  .dark {
    /* Dark mode – cadet-tinted slate, bright accents, proper dark backgrounds */
    --bg-main: #1a2432;
    --bg-main-gradient: linear-gradient(135deg, #1a2432 0%, #1e2d3d 50%, #1a2432 100%);
    --bg-quick-actions-gradient: rgba(30, 45, 61, 0.6);
    --bg-primary: #1a2432;
    --bg-secondary: #243447;
    --bg-tertiary: #1a2432;
    --bg-section: rgba(36, 52, 71, 0.5);
    --bg-nav-footer: #0f1820;
    --bg-dropdown: #1e2d3d;
    --bg-dropdown-hover: rgba(36, 52, 71, 0.8);
    --border-dropdown: rgba(71, 95, 119, 0.5);
    --text-dropdown: #e2e8f0;
    --bg-card: #243447;
    --bg-card-hover: #2d4157;
    --bg-card-inner: #2a3d52;
    --text-card-inner: #e5e7eb;
    --bg-icon: #243447;
    --bg-icon-charcoal: rgba(26, 36, 50, 0.95);
    --bg-avatar-fallback-dark: #2a3d52;
    --bg-avatar: #2a3d52;
    --text-icon: #cbd5e1;
    --bg-input: #243447;
    --bg-input-dark: rgba(36, 52, 71, 0.8);
    --border-input: #3d5266;
    --border-input-dark: #4d6577;
    --bg-button-primary: #5F9EA0;
    --bg-button-primary-hover: #4a8a8c;
    --bg-button-cadet: #5F9EA0;
    --bg-button-cadet-hover: rgba(95, 158, 160, 0.85);
    --bg-button-delete: #ef4444;
    --bg-button-delete-hover: #dc2626;
    --bg-button-secondary: #243447;
    --bg-button-secondary-hover: #2d4157;
    --bg-button-hover: rgba(45, 65, 87, 0.8);
    --bg-button-disabled: rgba(36, 52, 71, 0.5);
    --text-button-disabled: #94a3b8;
    --bg-button-cancel: #2a3d52;
    --bg-button-cancel-hover: #354a62;
    --bg-error: rgba(95, 158, 160, 0.2);
    --border-error: #7FB3B3;
    --text-error: #7FB3B3;
    --text-cadet-blue: #6eb5b7;
    --radio-bg: rgba(36, 52, 71, 0.9);
    --radio-border: #3d5266;
    --radio-checked-border: #5F9EA0;
    --bg-goal-success: #064e3b;
    --text-goal-success: #34d399;
    --bg-goal-icon-success: rgba(52, 211, 153, 0.15);
    --text-goal-icon-success: #34d399;
    --bg-goal-icon-medication: rgba(196, 181, 253, 0.15);
    --text-goal-icon-medication: #c4b5fd;
    --bg-goal-icon-hydration: rgba(94, 234, 212, 0.15);
    --text-goal-icon-hydration: #5eead4;
    --text-primary: #f1f5f9;
    --text-secondary: #cbd5e1;
    --text-tertiary: #94a3b8;
    --text-muted: #94a3b8;
    --text-white: #ffffff;
    --border-primary: #3d5266;
    --border-secondary: #4d6577;
    --border-card: #3d5266;
    --border-card-hover: #5F9EA0;
    --border-card-inner: rgba(71, 95, 119, 0.5);
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.25);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.35), 0 2px 4px -2px rgb(0 0 0 / 0.35);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.35), 0 4px 6px -4px rgb(0 0 0 / 0.35);
  }

  * {
    @apply scroll-smooth;
  }
  
  body {
    background-color: var(--bg-primary);
    background-image: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-tertiary) 100%);
    color: var(--text-primary);
    font-feature-settings: 'rlig' 1, 'calt' 1;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  
  html {
    scroll-behavior: smooth;
  }

}

@media (max-width: 820px) {
  .card.backdrop-blur-sm {
    backdrop-filter: none;
    background-color: var(--bg-card);
  }

  .card.backdrop-blur-sm .card-inner {
    backdrop-filter: none;
    background-color: var(--bg-card-inner);
  }

  /* Force body/html to have dark background in dark mode on mobile to prevent white flash */
  .dark body,
  .dark html {
    background-color: var(--bg-primary) !important;
    background-image: none !important;
  }
}

@layer components {
  .btn-primary {
    background-color: var(--bg-button-primary);
    color: var(--text-white);
    @apply font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg active:scale-95;
  }

  .btn-primary:hover {
    background-color: #2563eb;
  }

  .btn-secondary {
    background-color: var(--bg-button-secondary);
    color: var(--text-primary);
    @apply font-medium py-3 px-6 rounded-xl border transition-all duration-200 shadow-sm hover:shadow-md;
    border-color: var(--border-primary);
  }

  .btn-secondary:hover {
    background-color: var(--bg-button-secondary-hover);
    border-color: var(--border-secondary);
  }

  .card {
    background-color: var(--bg-card);
    color: var(--text-primary);
    /* border: 1px solid; */
    /* border-color: var(--border-card); */
    @apply rounded-xl shadow-sm p-6 transition-shadow duration-200 hover:shadow-md;
  }
  
  .card-link {
    -webkit-tap-highlight-color: transparent;
    outline: none;
  }

  .card-link:focus,
  .card-link:active,
  .card-link:focus-visible {
    outline: none !important;
    box-shadow: none;
  }
  
.tooltip-card {
  background-color: rgba(248, 250, 252, 0.96);
  color: var(--text-card-inner);
  @apply shadow-md;
}

.dark .tooltip-card {
  background-color: rgba(36, 52, 71, 0.96);
  color: var(--text-card-inner);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.35);
}

  .dark .card:hover {
    border-color: var(--border-card-hover);
  }
  
  .dark .card.no-hover-border:hover {
    border-color: var(--border-card); /* Keep original border on hover */
  }
  

.card-inner {
    background-color: var(--bg-card-inner);
    color: var(--text-card-inner);
    border: none;
    @apply rounded-xl;
  }

  .dark .card-inner {
    background-color: var(--bg-avatar-fallback-dark);
  }

  .avatar-bg {
    background-color: var(--bg-avatar) !important;
  }

  .section-bg {
    background-color: var(--bg-section);
  }

  .button-delete {
    background-color: var(--bg-button-delete);
    color: white; /* White text for light mode solid red background */
    border-color: #dc2626; /* Red border for light mode */
    @apply px-4 py-2 rounded-lg transition-colors border hover:border-red-700 font-semibold;
  }
  .dark .button-delete {
    color: white; /* White text for dark mode red background */
    border-color: #dc2626; /* Red border for dark mode */
  }
  .button-delete:hover {
    background-color: var(--bg-button-delete-hover);
  }

  .button-cancel {
    background-color: var(--bg-button-cancel);
    color: var(--text-secondary);
    @apply px-4 py-2 rounded-lg transition-colors;
  }
  .button-cancel:hover {
    background-color: var(--bg-button-cancel-hover);
  }

  .card-mobile {
    background-color: var(--bg-card);
    border-color: var(--border-primary);
    @apply rounded-2xl shadow-lg p-4 sm:p-6 transition-all duration-300 hover:shadow-xl;
    border: 1px solid;
    backdrop-filter: blur(8px);
  }

  .input-field {
    background-color: var(--bg-input);
    color: var(--text-primary);
    border-color: var(--border-primary);
    @apply w-full px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:border-transparent transition-all duration-200;
    border: 1px solid;
    backdrop-filter: blur(8px);
  }

  .input-field-wizard {
    background-color: var(--bg-input-dark);
    color: var(--text-primary);
    border-color: var(--border-input-dark);
    @apply w-full px-3 py-2 border rounded-lg focus:outline-none transition-all duration-200 text-left text-base placeholder-slate-400;
  }

  /* Hide browser validation icons */
  .input-field-wizard::-webkit-validation-bubble-message,
  .input-field-wizard::-webkit-validation-bubble-icon,
  .input-field-wizard::-webkit-validation-bubble-arrow {
    display: none !important;
  }

  .input-field-wizard:valid,
  .input-field-wizard:invalid {
    box-shadow: none !important;
  }

select.input-field-wizard {
    background-color: var(--bg-input-dark) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-input-dark) !important;
    @apply px-3 py-2 border rounded-lg focus:outline-none transition-all duration-200 text-left text-base placeholder-slate-400;
    appearance: none !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23475569' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e") !important;
    background-position: right 0.75rem center !important;
    background-repeat: no-repeat !important;
    background-size: 1.5em 1.5em !important;
    padding-right: 2.5rem !important;
}

select.input-field-wizard.placeholder {
    color: #94a3b8 !important;
}

select.input-field-wizard.has-value {
    color: var(--text-primary) !important;
}

select.input-field-wizard:focus {
    border-color: var(--border-input-dark) !important;
    box-shadow: none !important;
    outline: none !important;
}

/* Dark mode placeholder – better contrast on cadet-tinted dark */
.dark .input-field-wizard::placeholder {
    color: #94a3b8 !important;
}

.dark select.input-field-wizard.placeholder {
    color: #94a3b8 !important;
}

select.input-field-wizard option {
    background-color: var(--bg-input-dark) !important;
    color: var(--text-primary) !important;
}

/* Dark mode: Make select dropdown options match datepicker color */
.dark select.input-field-wizard option {
    background-color: #1e2d3d !important;
    color: var(--text-primary) !important;
}

select.input-field-wizard option[value=""] {
    color: var(--text-secondary) !important;
}

  .icon-container {
    background-color: var(--bg-icon);
    color: var(--text-icon);
    @apply rounded-xl flex items-center justify-center;
  }

  .icon-container--charcoal {
    background-color: var(--bg-icon-charcoal);
  }

  .icon-container--muted {
    background-color: rgba(148, 163, 184, 0.35);
  }

  .dark .icon-container--muted {
    background-color: rgba(42, 45, 52, 0.8);
  }

  .landing-icon {
    background-color: #e2e8f0;
  }

  .dark .landing-icon {
    background-color: rgba(60, 63, 70, 0.72);
  }


  .button-cadet {
    background-color: var(--bg-button-cadet);
    @apply text-white font-semibold transition-all duration-300;
  }
  
  .button-cadet:hover {
    background-color: var(--bg-button-cadet-hover);
  }

  .text-cadet-blue {
    color: var(--text-cadet-blue);
  }

  .radio-button {
    background-color: var(--radio-bg);
    border-color: var(--radio-border);
    @apply border-2 rounded;
  }

  .radio-button:checked {
    border-color: var(--radio-checked-border) !important;
    border-width: 2px !important;
  }


  .button-disabled {
    background-color: var(--bg-button-disabled);
    color: var(--text-button-disabled);
    @apply cursor-not-allowed;
  }

  /* Utility classes for easy theme usage */
  .text-primary {
    color: var(--text-primary);
  }

  .text-secondary {
    color: var(--text-secondary);
  }

  .text-tertiary {
    color: var(--text-tertiary);
  }

  .text-muted {
    color: var(--text-muted);
  }

  .text-white {
    color: var(--text-white);
  }

  .bg-card {
    background-color: var(--bg-card);
  }

  .bg-card-hover {
    background-color: var(--bg-card-hover);
  }

  .border-theme {
    border-color: var(--border-primary);
  }
}
  
  .slider {
    @apply w-full h-3 bg-gradient-to-r from-gray-200 to-gray-300 rounded-full appearance-none cursor-pointer transition-all duration-200;
  }
  
  .slider::-webkit-slider-thumb {
    @apply appearance-none h-6 w-6 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full cursor-pointer shadow-lg transition-all duration-200 hover:scale-110;
  }
  
  .slider::-moz-range-thumb {
    @apply h-6 w-6 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full cursor-pointer border-0 shadow-lg transition-all duration-200 hover:scale-110;
  }

  .slider-custom {
    @apply w-full h-3 rounded-full appearance-none cursor-pointer transition-all duration-200;
  }
  
  .slider-custom::-webkit-slider-thumb {
    @apply appearance-none h-6 w-6 bg-blue-500 rounded-full cursor-pointer shadow-lg border-2 border-blue-700 transition-all duration-200 hover:scale-110 hover:border-blue-800;
  }
  
  .slider-custom::-moz-range-thumb {
    @apply h-6 w-6 bg-blue-500 rounded-full cursor-pointer border-2 border-blue-700 shadow-lg transition-all duration-200 hover:scale-110 hover:border-blue-800;
  }

  /* Override Chrome autofill styling */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px white inset !important;
    -webkit-text-fill-color: #374151 !important;
    background-color: white !important;
  }

  /* Dark mode autofill styling */
  .dark input:-webkit-autofill,
  .dark input:-webkit-autofill:hover,
  .dark input:-webkit-autofill:focus,
  .dark input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px #243447 inset !important;
    -webkit-text-fill-color: var(--text-primary) !important;
    background-color: #243447 !important;
    border-radius: 0.5rem !important;
  }

  .dark input.input-field-wizard:-webkit-autofill,
  .dark input.input-field-wizard:-webkit-autofill:hover,
  .dark input.input-field-wizard:-webkit-autofill:focus,
  .dark input.input-field-wizard:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px #243447 inset !important;
    -webkit-text-fill-color: var(--text-primary) !important;
    background-color: #243447 !important;
    border-radius: 0.5rem !important;
  }
  
  .nav-link {
    @apply px-4 py-2 rounded-xl text-base font-medium transition-all duration-200 transform hover:scale-105;
    font-family: 'Roboto', system-ui, sans-serif;
  }
  
  .nav-link-active {
    @apply bg-blue-100 text-blue-700 shadow-sm;
  }
  
  .nav-link-inactive {
    @apply text-gray-600 hover:text-gray-800 hover:bg-gray-100;
  }
  
  .hero-gradient {
    @apply bg-gradient-to-br from-teal-500 via-purple-600 to-indigo-700;
  }
  
         .feature-card {
           @apply relative overflow-hidden bg-white/80 rounded-2xl shadow-lg border border-white/20 p-6 transition-all duration-500 hover:shadow-2xl hover:bg-white/90;
           backdrop-filter: blur(8px);
         }

         .feature-card:hover {
           transform: scale(1.05);
         }

         /* Disable scale animations on mobile */
         @media (max-width: 1024px) {
           .feature-card:hover {
             transform: none;
           }
           
           .btn-primary:hover {
             transform: none;
           }
           
           .card:hover {
             transform: none;
           }
           
           .nav-link:hover {
             transform: none;
           }
           
           .feature-icon:hover {
             transform: none;
           }
           
           .slider::-webkit-slider-thumb:hover {
             transform: none;
           }
           
           .slider::-moz-range-thumb:hover {
             transform: none;
           }
         }
  
  
  .feature-icon {
    @apply w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:from-blue-200 group-hover:to-indigo-200 transition-all duration-300 group-hover:scale-110;
  }
  
  .pulse-animation {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  
  .bounce-in {
    animation: bounceIn 0.6s ease-out;
  }
  
  .fade-in-up {
    animation: fadeInUp 0.8s ease-out;
  }
  
  .slide-in-right {
    animation: slideInRight 0.5s ease-out;
  }

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: .8;
  }
}

@keyframes bounceIn {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Mobile-first responsive utilities */
@media (max-width: 640px) {
  .card {
    @apply p-6;
  }
  
  .btn-primary {
    @apply py-3 px-5 text-base;
  }
  
  .feature-card {
    @apply p-4;
  }
  
  .feature-icon {
    @apply w-14 h-14;
  }
}

/* Mobile menu animations */
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Gradient animation for daily tips */
.animate-gradient-x {
  animation: gradient-pulse 4s ease-in-out infinite;
}

@keyframes gradient-pulse {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

/* React DatePicker Custom Styling */
.react-datepicker__input-container input {
  background-color: var(--bg-input-dark) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-input-dark) !important;
  @apply px-3 py-2 border rounded-lg focus:outline-none transition-all duration-200 text-left text-base placeholder-slate-400;
}

/* Contain calendar so last column stays inside box (light + dark, all viewports) */
.react-datepicker-popper {
  max-width: min(280px, calc(100vw - 24px)) !important;
}
.react-datepicker {
  background-color: var(--bg-card) !important;
  border: 1px solid var(--border-card) !important;
  border-radius: 16px !important;
  box-shadow: var(--shadow-lg) !important;
  font-family: inherit !important;
  padding: 8px !important;
  font-size: 14px !important;
  width: 280px !important;
  max-width: calc(100vw - 24px) !important;
  box-sizing: border-box !important;
  overflow: hidden !important;
}

/* Hide month container for time-only pickers */
.react-datepicker-responsive .react-datepicker__month-container {
  display: none !important;
}

.react-datepicker-responsive .react-datepicker__time-container {
  border-left: none !important;
  float: none !important;
  width: 100% !important;
}

/* Mobile responsiveness */
@media (max-width: 640px) {
  .react-datepicker-responsive .react-datepicker__month-container {
    display: none !important;
  }
  
  .react-datepicker-responsive .react-datepicker__time-container {
    border-left: none !important;
    float: none !important;
  }
  
  .react-datepicker-responsive .react-datepicker__time-list {
    max-height: 200px !important;
    overflow-y: auto !important;
  }
}

@media (max-width: 640px) {
  /* Nuclear option: Use hardcoded opaque color to rule out CSS variable issues */
  .dark .react-datepicker,
  .dark .react-datepicker__wrapper,
  .dark .react-datepicker__triangle,
  .dark .react-datepicker-popper,
  .dark .react-datepicker-popper > div,
  .dark .react-datepicker-popper > div > div,
  .dark body > .react-datepicker__portal,
  .dark body > .react-datepicker__portal > div,
  .dark body > div[class*="react-datepicker"],
  .dark .react-datepicker__portal,
  .dark .react-datepicker__portal > div,
  .dark .react-datepicker__portal .react-datepicker,
  .dark .react-datepicker-popper-opaque,
  .dark .react-datepicker-popper-opaque > div,
  .dark .react-datepicker-popper-opaque .react-datepicker,
  .dark .react-datepicker-responsive,
  .dark .react-datepicker-responsive * {
    background-color: #1e2d3d !important;
    background: #1e2d3d !important;
    opacity: 1 !important;
  }
  
  /* Force ALL datepicker elements to be opaque on mobile in dark mode */
  .dark .react-datepicker *:not(.react-datepicker__day):not(.react-datepicker__day--selected):not(.react-datepicker__day--today):not(.react-datepicker__day:hover) {
    background-color: #1e2d3d !important;
    background: #1e2d3d !important;
    opacity: 1 !important;
  }
  
  /* Exception: day cells should be transparent (unless hovered/selected) */
  .dark .react-datepicker__day:not(:hover):not(.react-datepicker__day--selected):not(.react-datepicker__day--today) {
    background-color: transparent !important;
    background: transparent !important;
  }
  
  .dark .react-datepicker {
    background-color: #1e2d3d !important;
    background: #1e2d3d !important;
    font-size: 12px !important;
    padding: 8px !important;
    border-radius: 12px !important;
    position: fixed !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    width: 280px !important;
    border: 1px solid var(--border-card) !important;
    box-shadow: var(--shadow-lg) !important;
    z-index: 9999 !important;
  }
  
  .react-datepicker-responsive .react-datepicker__month-container {
    display: none !important;
  }
  
  .react-datepicker-responsive .react-datepicker__time-container {
    border-left: none !important;
    width: 100% !important;
    float: none !important;
  }
  
  .react-datepicker__month-container {
    width: 210px !important;
    float: left !important;
  }
  
  .dark .react-datepicker__month-container {
    background-color: #1e2d3d !important;
  }
  
  .react-datepicker__time-container {
    border-left: 1px solid var(--border-card-inner) !important;
    width: 70px !important;
    float: right !important;
  }
  
  .dark .react-datepicker__time-container {
    background-color: #1e2d3d !important;
  }
  
  .dark .react-datepicker__time {
    background-color: #1e2d3d !important;
  }
  
  .react-datepicker__time-box {
    width: 70px !important;
  }
  
  .dark .react-datepicker__time-box {
    background-color: #1e2d3d !important;
  }
  
  .react-datepicker::after {
    content: "" !important;
    display: table !important;
    clear: both !important;
  }
  
  .react-datepicker__time-list-item {
    padding: 4px 6px !important;
    font-size: 10px !important;
  }
  
  .react-datepicker__time-list-item:hover {
    background-color: var(--bg-button-hover) !important;
  }
  
  .react-datepicker__time-list-item--selected {
    background-color: var(--bg-button-cadet) !important;
    color: white !important;
  }
  
  .react-datepicker__day {
    width: 26px !important;
    height: 26px !important;
    line-height: 26px !important;
    font-size: 11px !important;
    margin: 0 1px !important;
  }
  
  .react-datepicker__day-name {
    width: 26px !important;
    line-height: 26px !important;
    font-size: 9px !important;
    margin: 0 1px !important;
  }
  
  .dark .react-datepicker__day-name {
    background-color: #1e2d3d !important;
  }
  
  .react-datepicker__current-month {
    font-size: 13px !important;
  }
  
  .react-datepicker__navigation {
    width: 26px !important;
    height: 26px !important;
  }
  
  .dark .react-datepicker__navigation {
    background-color: #1e2d3d !important;
  }
  
  .react-datepicker__navigation-icon::before {
    width: 5px !important;
    height: 5px !important;
  }
  
  .dark .react-datepicker__header {
    background-color: #1e2d3d !important;
  }
  
  .dark .react-datepicker__month {
    background-color: #1e2d3d !important;
  }
  
  .dark .react-datepicker__day-names {
    background: #1e2d3d !important;
    background-color: #1e2d3d !important;
  }
  
  .dark .react-datepicker__day-names > div {
    background: #1e2d3d !important;
    background-color: #1e2d3d !important;
  }
  
  .dark .react-datepicker__week {
    background-color: #1e2d3d !important;
  }
  
  .dark .react-datepicker__current-month {
    background-color: #1e2d3d !important;
  }
  
  /* Force all container elements to be opaque */
  .dark .react-datepicker > div,
  .dark .react-datepicker__month-container > div,
  .dark .react-datepicker__time-container > div,
  .dark .react-datepicker__month-container *:not(.react-datepicker__day):not(.react-datepicker__day--selected):not(.react-datepicker__day--today):not(.react-datepicker__day:hover) {
    background-color: #1e2d3d !important;
    background: #1e2d3d !important;
  }
  
  /* Make the entire datepicker and all its children opaque, except day cells */
  .dark .react-datepicker *:not(.react-datepicker__day):not(.react-datepicker__day--selected):not(.react-datepicker__day--today):not(.react-datepicker__day:hover):not(.react-datepicker__day--in-range) {
    background-color: #1e2d3d !important;
    background: #1e2d3d !important;
  }
  
  /* Force absolutely everything to be opaque - most aggressive */
  .dark .react-datepicker,
  .dark .react-datepicker * {
    background-color: #1e2d3d !important;
    background: #1e2d3d !important;
  }
  
  /* Exception: day cells should be transparent (unless hovered/selected) */
  .dark .react-datepicker__day:not(:hover):not(.react-datepicker__day--selected):not(.react-datepicker__day--today):not(.react-datepicker__day--in-range) {
    background-color: transparent !important;
    background: transparent !important;
  }
}

.react-datepicker__header {
  background-color: transparent !important;
  border-bottom: 1px solid var(--border-card-inner) !important;
  border-radius: 0 !important;
  padding: 12px 8px 8px 8px !important;
}

.react-datepicker__current-month {
  color: var(--text-primary) !important;
  font-weight: 700 !important;
  font-size: 16px !important;
  margin-bottom: 8px !important;
}

.react-datepicker__day-names {
  margin-bottom: 4px !important;
}

.react-datepicker__day-name {
  color: var(--text-secondary) !important;
  font-weight: 600 !important;
  font-size: 12px !important;
  width: 32px !important;
  line-height: 32px !important;
  margin: 0 2px !important;
}

.react-datepicker__month {
  margin: 0 !important;
  padding: 4px !important;
}

.react-datepicker__week {
  margin-bottom: 2px !important;
}

.react-datepicker__day {
  color: var(--text-primary) !important;
  border-radius: 8px !important;
  transition: all 0.2s ease !important;
  width: 32px !important;
  height: 32px !important;
  line-height: 32px !important;
  margin: 0 2px !important;
  font-size: 14px !important;
  font-weight: 500 !important;
  background-color: transparent !important;
  border: none !important;
}

.react-datepicker__day:hover {
  background-color: var(--bg-button-hover) !important;
  color: var(--text-primary) !important;
  transform: scale(1.05) !important;
}

/* Remove all range/in-range highlighting */
.react-datepicker__day--in-range,
.react-datepicker__day--in-selecting-range,
.react-datepicker__day--selecting-range-start,
.react-datepicker__day--selecting-range-end,
.react-datepicker__day--range-start,
.react-datepicker__day--range-end,
.react-datepicker__day--keyboard-selected,
.react-datepicker__day--in-range:hover,
.react-datepicker__day--in-selecting-range:hover,
.react-datepicker__day--range-start:hover,
.react-datepicker__day--range-end:hover {
  background-color: transparent !important;
  color: var(--text-primary) !important;
  border-color: transparent !important;
}

.react-datepicker__day--selected {
  background-color: var(--bg-button-cadet) !important;
  color: white !important;
  font-weight: 600 !important;
}

.react-datepicker__day--selected.react-datepicker__day--outside-month {
  background-color: transparent !important;
  color: var(--text-muted) !important;
  opacity: 0.4 !important;
}

.react-datepicker__day--selected:hover {
  background-color: var(--bg-button-cadet-hover) !important;
  transform: scale(1.05) !important;
}

.react-datepicker__day--today {
  background-color: transparent !important;
  color: var(--text-cadet-blue) !important;
  font-weight: 700 !important;
  border: 2px solid var(--text-cadet-blue) !important;
}

.react-datepicker__day--today:hover {
  background-color: var(--bg-button-hover) !important;
  color: var(--text-primary) !important;
  border-color: var(--text-cadet-blue) !important;
}

.react-datepicker__day--today.react-datepicker__day--selected {
  background-color: var(--bg-button-cadet) !important;
  color: white !important;
  border-color: var(--bg-button-cadet) !important;
}

.react-datepicker__day--outside-month {
  color: var(--text-muted) !important;
  opacity: 0.4 !important;
}

.react-datepicker__day--disabled {
  color: var(--text-muted) !important;
  opacity: 0.3 !important;
}

.react-datepicker__navigation {
  background-color: transparent !important;
  border: none !important;
  width: 32px !important;
  height: 32px !important;
  border-radius: 8px !important;
  top: 12px !important;
}

.react-datepicker__navigation:hover {
  background-color: transparent !important;
}

.react-datepicker__navigation--previous {
  background-color: transparent !important;
  border: none !important;
}

.react-datepicker__navigation--previous:hover {
  background-color: transparent !important;
}

.react-datepicker__navigation--next {
  background-color: transparent !important;
  border: none !important;
}

.react-datepicker__navigation--next:hover {
  background-color: transparent !important;
}

/* Override any default react-datepicker navigation styles */
.react-datepicker__navigation--previous:before,
.react-datepicker__navigation--next:before {
  background-color: transparent !important;
}

.react-datepicker__navigation--previous:hover:before,
.react-datepicker__navigation--next:hover:before {
  background-color: transparent !important;
}

.react-datepicker__navigation-icon::before {
  border-color: var(--text-primary) !important;
  border-width: 2px 2px 0 0 !important;
  width: 8px !important;
  height: 8px !important;
}

.react-datepicker__month-dropdown,
.react-datepicker__year-dropdown {
  background-color: var(--bg-card) !important;
  border: 1px solid var(--border-card) !important;
  border-radius: 12px !important;
  box-shadow: var(--shadow-md) !important;
  padding: 8px !important;
}

.react-datepicker__month-option,
.react-datepicker__year-option {
  color: var(--text-primary) !important;
  transition: all 0.2s ease !important;
  padding: 8px 12px !important;
  border-radius: 8px !important;
  margin: 2px 0 !important;
  font-size: 14px !important;
}

.react-datepicker__month-option:hover,
.react-datepicker__year-option:hover {
  background-color: var(--bg-button-hover) !important;
}

.react-datepicker__month-option--selected,
.react-datepicker__year-option--selected {
  background-color: var(--bg-button-cadet) !important;
  color: white !important;
  font-weight: 600 !important;
}

/* Dark mode specific adjustments */
.dark .react-datepicker__input-container input {
  background-color: #243447 !important;
  color: var(--text-primary) !important;
  border-color: var(--border-input-dark) !important;
  box-shadow: none !important;
  outline: none !important;
}

.dark .react-datepicker__input-container input:focus {
  background-color: #243447 !important;
  color: var(--text-primary) !important;
  border-color: var(--border-input-dark) !important;
  box-shadow: none !important;
  outline: none !important;
}

.dark .react-datepicker__input-container input.input-field-wizard {
  background-color: #243447 !important;
  color: var(--text-primary) !important;
  border-color: var(--border-input-dark) !important;
  box-shadow: none !important;
  outline: none !important;
}

.dark .react-datepicker__input-container input.input-field-wizard:focus {
  background-color: #243447 !important;
  color: var(--text-primary) !important;
  border-color: var(--border-input-dark) !important;
  box-shadow: none !important;
  outline: none !important;
}

.dark .react-datepicker__input-container input.input-field-wizard:-webkit-autofill,
.dark .react-datepicker__input-container input.input-field-wizard:-webkit-autofill:hover,
.dark .react-datepicker__input-container input.input-field-wizard:-webkit-autofill:focus,
.dark .react-datepicker__input-container input.input-field-wizard:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 1000px #243447 inset !important;
  -webkit-text-fill-color: var(--text-primary) !important;
  background-color: #243447 !important;
  border-radius: 0.5rem !important;
}

.dark input.input-field-wizard,
.dark textarea.input-field-wizard {
  background-color: #243447 !important;
  color: var(--text-primary) !important;
  border-color: var(--border-input-dark) !important;
  box-shadow: none !important;
  outline: none !important;
}

.dark input.input-field-wizard:focus,
.dark textarea.input-field-wizard:focus {
  background-color: #243447 !important;
  color: var(--text-primary) !important;
  border-color: var(--border-input-dark) !important;
  box-shadow: none !important;
  outline: none !important;
}

/* Desktop only - mobile has its own rules in media query */
@media (min-width: 641px) {
  .dark .react-datepicker {
    background-color: var(--bg-card) !important;
    border-color: var(--border-card) !important;
  }

  .dark .react-datepicker__time-container {
    background-color: var(--bg-card) !important;
    border-left-color: var(--border-card-inner) !important;
  }

  .dark .react-datepicker__time {
    background-color: var(--bg-card) !important;
  }

  .dark .react-datepicker__time-box {
    background-color: var(--bg-card) !important;
  }

  .dark .react-datepicker__time-list {
    background-color: var(--bg-card) !important;
  }

  .dark .react-datepicker__time-list-item {
    background-color: transparent !important;
    color: var(--text-primary) !important;
  }

  .dark .react-datepicker__time-list-item:hover {
    background-color: var(--bg-button-hover) !important;
    color: var(--text-primary) !important;
  }

  .dark .react-datepicker__time-list-item--selected {
    background-color: var(--bg-button-cadet) !important;
    color: white !important;
  }

  .dark .react-datepicker__time-caption {
    color: var(--text-primary) !important;
  }

  .dark .react-datepicker__time-header {
    color: var(--text-primary) !important;
  }

  .dark .react-datepicker__time-container .react-datepicker__time-caption,
  .dark .react-datepicker__time-container > div:first-child,
  .dark .react-datepicker__time-container label,
  .dark .react-datepicker__time-container > div:first-child > div {
    color: var(--text-primary) !important;
  }

  .dark .react-datepicker__time-container > *:not(.react-datepicker__time-list) {
    color: var(--text-primary) !important;
  }
}

.dark .react-datepicker__header {
  background-color: var(--bg-card-inner) !important;
  border-bottom-color: var(--border-card-inner) !important;
}

/* General dark mode time picker styling (applies to all screen sizes) */
.dark .react-datepicker__time-container {
  background-color: var(--bg-card) !important;
  border-left-color: var(--border-card-inner) !important;
}

.dark .react-datepicker__time {
  background-color: var(--bg-card) !important;
}

.dark .react-datepicker__time-box {
  background-color: var(--bg-card) !important;
}

.dark .react-datepicker__time-list {
  background-color: var(--bg-card) !important;
}

.dark .react-datepicker__time-list-item {
  background-color: transparent !important;
  color: var(--text-primary) !important;
}

.dark .react-datepicker__time-list-item:hover {
  background-color: var(--bg-button-hover) !important;
  color: var(--text-primary) !important;
}

.dark .react-datepicker__time-list-item--selected {
  background-color: var(--bg-button-cadet) !important;
  color: white !important;
}

.dark .react-datepicker__time-caption {
  color: var(--text-primary) !important;
}

.dark .react-datepicker__time-header {
  color: var(--text-primary) !important;
}

.dark .react-datepicker__time-container .react-datepicker__time-caption,
.dark .react-datepicker__time-container > div:first-child,
.dark .react-datepicker__time-container label,
.dark .react-datepicker__time-container > div:first-child > div {
  color: var(--text-primary) !important;
}

/* Target all text in time container except list items (they have their own rules) */
.dark .react-datepicker__time-container > *:not(.react-datepicker__time-list) {
  color: var(--text-primary) !important;
}

/* More aggressive: target all direct children and nested elements in time container header */
.dark .react-datepicker__time-container > div:first-child,
.dark .react-datepicker__time-container > div:first-child *,
.dark .react-datepicker__time-container label,
.dark .react-datepicker__time-container label * {
  color: var(--text-primary) !important;
}

.dark .react-datepicker__day--today {
  background-color: var(--bg-card-inner) !important;
  color: var(--text-cadet-blue) !important;
}

/* Dark mode scrollbar styling */
.dark ::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

.dark ::-webkit-scrollbar-track {
  background: var(--bg-card);
  border-radius: 6px;
}

.dark ::-webkit-scrollbar-thumb {
  background: var(--border-card-inner);
  border-radius: 6px;
  border: 2px solid var(--bg-card);
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: var(--border-input-dark);
}

/* Firefox scrollbar */
.dark {
  scrollbar-width: thin;
  scrollbar-color: var(--border-card-inner) var(--bg-card);
}